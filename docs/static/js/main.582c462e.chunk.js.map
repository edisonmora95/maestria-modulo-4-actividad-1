{"version":3,"sources":["components/navbar/index.js","components/searchBar/index.js","services/routes.js","services/posts/index.js","components/postList/post/index.js","components/postList/index.js","services/localStorage/index.js","services/authentication/index.js","components/profile/index.js","components/login/index.js","plugins/axios.js","App.js","reportWebVitals.js","index.js"],"names":["Navbar","props","onLogoClick","onProfileClick","className","href","onClick","SearchBar","onSearch","value","onKeyDown","e","keyCode","preventDefault","onChange","target","type","placeholder","BASE_URL","getPosts","a","url","axios","get","response","data","Promise","reject","likePost","postId","post","dayjs","extend","relativeTime","Post","img","createdAt","postLikes","likes","author","description","comments","id","time","fromNow","useState","setLikes","likeBtnClicked","setLikeBtnClicked","onLikeBtnClick","console","log","renderTime","style","textAlign","renderLikeBtn","marginLeft","src","alt","fontWeight","name","PostList","posts","map","image","text","length","setUserId","localStorage","setItem","getUserId","getItem","removeUserId","removeItem","login","username","password","body","getLoggedUser","userId","logout","Profile","avatar","bio","onLogout","history","useHistory","onLogoutClick","push","class","Login","onLoginComplete","error","setError","message","setMessage","loading","setLoading","onLoginClick","email","onSubmit","role","htmlFor","disabled","interceptors","use","status","window","location","replace","App","state","searchValue","loadedPosts","section","loginOk","currentUser","bind","this","getUser","loadPosts","user","setState","filteredPosts","filter","p","toLowerCase","includes","path","renderProfile","renderSearchBar","renderPostList","renderNavbar","renderMainContent","Component","withRouter","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.582c462e.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Navbar = (props) => {\r\n  const {\r\n    onLogoClick,\r\n    onProfileClick,\r\n  } = props;\r\n  const renderContent = () => {\r\n    return (\r\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n        <div className=\"container-fluid\">\r\n          <a className=\"navbar-brand\" href=\"/\">\r\n            <i className=\"bi-lightning-charge-fill\"></i>\r\n            <span onClick={onLogoClick}>three pics</span>\r\n          </a>\r\n          <i className=\"bi-person-circle\" onClick={onProfileClick}></i>\r\n        </div>\r\n      </nav>\r\n    );\r\n  };\r\n\r\n  return renderContent();\r\n};\r\n\r\nexport default Navbar;\r\n","import React from 'react';\r\n\r\nconst SearchBar = (props) => {\r\n  const {\r\n    onSearch,\r\n    value = \"\",\r\n  } = props;\r\n  const onKeyDown = (e) => {\r\n    if (e.keyCode === 13) {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n  const onChange = (e) => {\r\n    onSearch(e.target.value);\r\n  };\r\n  const renderContent = () => {\r\n    return (\r\n      <form>\r\n        <section className=\"search-section\">\r\n          <input\r\n            onKeyDown={onKeyDown}\r\n            onChange={onChange}\r\n            className=\"form-control\"\r\n            value={value}\r\n            type=\"text\"\r\n            placeholder=\"Search\"\r\n            aria-label=\"default input example\"/>\r\n        </section>\r\n      </form>\r\n    );\r\n  };\r\n\r\n  return renderContent();\r\n};\r\n\r\nexport default SearchBar;\r\n","export const BASE_URL = 'https://three-points.herokuapp.com';\r\n\r\nexport const LOGIN = '/api/login';\r\nexport const LOGOUT = '/api/logout';\r\nexport const GET_LOGGED_USER = '/api/users/';\r\nexport const GET_POSTS = '/api/posts/';","import axios from 'axios';\r\n\r\nimport { BASE_URL, GET_POSTS} from '../routes';\r\n\r\nexport const getPosts = async () => {\r\n  try {\r\n    const url = `${BASE_URL}${GET_POSTS}`;\r\n    const response = await axios.get(url);\r\n    return response.data;\r\n  } catch (error) {\r\n    return Promise.reject(error.data);\r\n  }\r\n};\r\n\r\n/**\r\n * @param {string} postId\r\n */\r\nexport const likePost = async (postId) => {\r\n  try {\r\n    const url = `${BASE_URL}/api/posts/${postId}/like`;\r\n    const response = await axios.post(url);\r\n    return response.data;\r\n  } catch (error) {\r\n    return Promise.reject(error.data);\r\n  }\r\n};","import React, { useState } from 'react';\r\nimport dayjs from 'dayjs';\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\n\r\nimport { likePost } from '../../../services/posts';\r\n\r\ndayjs.extend(relativeTime);\r\n\r\nconst Post = (props) => {\r\n  const {\r\n    img = 'http://placeimg.com/640/480',\r\n    createdAt,\r\n    likes: postLikes,\r\n    author,\r\n    description,\r\n    comments,\r\n    id,\r\n  } = props;\r\n\r\n  const time = dayjs(createdAt).fromNow();\r\n  const [likes, setLikes] = useState(postLikes);\r\n  const [likeBtnClicked, setLikeBtnClicked] = useState(false);\r\n\r\n  const onLikeBtnClick = async () => {\r\n    try {\r\n      if (likeBtnClicked) {\r\n        setLikes(likes - 1);\r\n        setLikeBtnClicked(false);\r\n        return;\r\n      }\r\n      setLikes(likes + 1);\r\n      setLikeBtnClicked(true);\r\n      await likePost(id);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const renderTimeAndLike = () => {\r\n    return (\r\n      <section className=\"row\">\r\n        {renderTime()}\r\n        {renderLikeBtn()}\r\n      </section>\r\n    );\r\n  };\r\n\r\n  const renderTime = () => {\r\n    return (\r\n      <article className=\"col-6\" style={{ textAlign: 'left' }}>\r\n        <span>{time}</span>\r\n      </article>\r\n    );\r\n  };\r\n\r\n  const renderLikeBtn = () => {\r\n    return (\r\n      <article className=\"col-6\" style={{ textAlign: 'right' }}>\r\n        <button type=\"button\" className=\"btn btn-danger\" onClick={onLikeBtnClick}>\r\n          <i className=\"bi-heart\"></i>\r\n          <span style={{ marginLeft: 5 }}>{likes}</span>\r\n        </button>\r\n      </article>\r\n    );\r\n  };\r\n\r\n  const renderAuthor = () => {\r\n    return (\r\n      <section style={{ textAlign: 'left' }} className=\"my-2\">\r\n        <span style={{ fontWeight: 'bold' }}>{author.name}</span>\r\n      </section>\r\n    );\r\n  };\r\n\r\n  const renderText = () => {\r\n    return (\r\n      <section>\r\n        <p className=\"card-text\" style={{ textAlign: \"justify\" }}>{description}</p>\r\n      </section>\r\n    );\r\n  };\r\n\r\n  const renderComments = () => {\r\n    return (\r\n      <section style={{ textAlign: 'left' }} className=\"my-2\">\r\n        <i className=\"bi-chat-right\"></i>\r\n        <span style={{ marginLeft: 5 }}>Comments ({comments})</span>\r\n      </section>\r\n    );\r\n  };\r\n\r\n  const renderContent = () => {\r\n    return (\r\n      <main className=\"card\">\r\n        <img src={img} alt=\"Logo\"/>\r\n        <section className=\"card-body\">\r\n          {renderTimeAndLike()}\r\n          {renderAuthor()}\r\n          {renderText()}\r\n          {renderComments()}\r\n        </section>\r\n      </main>\r\n    );\r\n  };\r\n\r\n  return renderContent();\r\n};\r\n\r\nexport default Post;\r\n","import React from 'react';\r\nimport Post from './post';\r\n\r\nconst PostList = (props) => {\r\n  const {\r\n    posts = [],\r\n  } = props;\r\n\r\n  const renderContent = () => {\r\n    return (\r\n      <section className=\"row\">\r\n        {posts.map((post) => {\r\n          return <article className=\"col-12 col-sm-6 col-md-4 my-2\" key={`post=${post.id}`}>\r\n            <Post\r\n              id={post.id}\r\n              img={post.image}\r\n              createdAt={post.createdAt}\r\n              likes={post.likes}\r\n              author={post.author}\r\n              description={post.text}\r\n              comments={post.comments.length}\r\n            />\r\n          </article>\r\n        })}\r\n      </section>\r\n    );\r\n  };\r\n\r\n  return renderContent();\r\n};\r\n\r\nexport default PostList;\r\n","/**\r\n * @param {string} id\r\n */\r\nexport const setUserId = (id) => {\r\n  localStorage.setItem('userId', id);\r\n};\r\n\r\nexport const getUserId = () => {\r\n  return localStorage.getItem('userId');\r\n};\r\n\r\nexport const removeUserId = () => {\r\n  localStorage.removeItem('userId');\r\n};\r\n","import axios from 'axios'\r\n\r\nimport { removeUserId, setUserId } from '../localStorage';\r\nimport {\r\n  BASE_URL,\r\n  LOGIN,\r\n  GET_LOGGED_USER,\r\n  LOGOUT,\r\n} from '../routes';\r\n\r\n/**\r\n * @param {string} username\r\n * @param {string} password\r\n */\r\nexport const login = async (username, password) => {\r\n  try {\r\n    const url = `${BASE_URL}${LOGIN}`;\r\n    const body = {\r\n      username,\r\n      password,\r\n    }\r\n    const response = await axios.post(url, body);\r\n    const { id = '' } = response.data;\r\n    setUserId(id);\r\n    return response.data;\r\n  } catch (error) {\r\n    return Promise.reject(error.data);\r\n  }\r\n};\r\n\r\n/**\r\n * @param {string} userId\r\n */\r\nexport const getLoggedUser = async (userId) => {\r\n  try {\r\n    const url = `${BASE_URL}${GET_LOGGED_USER}${userId}`;\r\n    const response = await axios.get(url);\r\n    return response.data;\r\n  } catch (error) {\r\n    return Promise.reject(error.data);\r\n  }\r\n};\r\n\r\n export const logout = async () => {\r\n  try {\r\n    const url = `${BASE_URL}${LOGOUT}`;\r\n    const response = await axios.post(url);\r\n    removeUserId();\r\n    return response.data;\r\n  } catch (error) {\r\n    return Promise.reject(error.data);\r\n  }\r\n};\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport { logout } from '../../services/authentication';\r\n\r\nimport './profile.css';\r\n\r\nconst Profile = (props) => {\r\n  const {\r\n    avatar,\r\n    username,\r\n    bio,\r\n    onLogout,\r\n  } = props;\r\n\r\n  const history = useHistory();\r\n\r\n  const onLogoutClick = async () => {\r\n    try {\r\n      await logout();\r\n      history.push(\"/login\");\r\n      onLogout();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const renderContent = () => {\r\n    return(\r\n      <main>\r\n        <section className=\"my-3\">\r\n          <img src={avatar} className=\"avatar\" alt=\"avatar img\"/>\r\n        </section>\r\n        <section className=\"my-3\">\r\n          <span><b>{username}</b></span>\r\n        </section>\r\n        <section className=\"my-3 px-3\">\r\n          <p>{bio}</p>\r\n        </section>\r\n        <section>\r\n          <button onClick={onLogoutClick} type=\"button\" class=\"btn btn-link\">Salir</button>\r\n        </section>\r\n      </main>\r\n    );\r\n  };\r\n\r\n  return renderContent();\r\n};\r\n\r\nexport default Profile;\r\n","import React from 'react';\r\nimport { useState } from 'react/cjs/react.development';\r\n\r\nimport { login } from '../../services/authentication';\r\n\r\nimport './login.css';\r\n\r\nconst Login = (props) => {\r\n  const {\r\n    onLoginComplete,\r\n  } = props;\r\n\r\n  const [error, setError] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const onLoginClick = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      setLoading(true);\r\n      const username = e.target.email.value;\r\n      const password = e.target.password.value;\r\n      await login(username, password);\r\n      setLoading(false);\r\n      setError(false);\r\n      setMessage('');\r\n      onLoginComplete();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(true);\r\n      setMessage(error.message);\r\n    }\r\n  }\r\n\r\n  const renderError = () => {\r\n    if (!error) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        {message}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"row login-main\" onSubmit={onLoginClick}>\r\n      {renderError()}\r\n      <form className=\"col-10 col-lg-4 col-md-4\">\r\n        <section className=\"mt-3\">\r\n          <label htmlFor=\"email\" className=\"form-label\">Email</label>\r\n          <input type=\"text\" name=\"email\" className=\"form-control\" id=\"email\" placeholder=\"name@example.com\" />\r\n        </section>\r\n        <section className=\"mt-3\">\r\n          <label htmlFor=\"password\" className=\"form-label\">Password</label>\r\n          <input type=\"password\" name=\"password\" className=\"form-control\" id=\"password\" />\r\n        </section>\r\n        <section className=\"mt-3 d-grid gap-2\">\r\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>Login</button>\r\n        </section>\r\n      </form>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import axios from 'axios';\r\n\r\nimport { removeUserId } from '../services/localStorage';\r\n\r\naxios.interceptors.response.use((response) => {\r\n  return response;\r\n}, (error) => {\r\n  if (error.response && error.response.status === 401) {\r\n    removeUserId();\r\n    window.location.replace(\"/login\");\r\n  }\r\n  return Promise.reject(error.response);\r\n});\r\n","import React, { Component } from 'react';\r\n\r\nimport Navbar from './components/navbar';\r\nimport SearchBar from './components/searchBar';\r\nimport PostList from './components/postList';\r\nimport Profile from './components/profile';\r\nimport Login from './components/login';\r\n\r\nimport './plugins/axios';\r\n\r\nimport './App.css';\r\nimport { getLoggedUser } from './services/authentication';\r\nimport { getUserId } from './services/localStorage';\r\nimport { Route, Switch, withRouter } from 'react-router';\r\nimport { getPosts } from './services/posts';\r\n\r\nclass App extends Component {\r\n  constructor () {\r\n    super();\r\n    this.state = {\r\n      posts: [],\r\n      searchValue: \"\",\r\n      loadedPosts: false,\r\n      section: \"posts\",\r\n      loginOk: false,\r\n      currentUser: {},\r\n    };\r\n    this.onSearch = this.onSearch.bind(this);\r\n    this.onProfileClick = this.onProfileClick.bind(this);\r\n    this.onLogoClick = this.onLogoClick.bind(this);\r\n    this.onLoginComplete = this.onLoginComplete.bind(this);\r\n    this.onLogout = this.onLogout.bind(this);\r\n  }\r\n\r\n  async componentDidMount () {\r\n    const userId = getUserId();\r\n    if (userId) {\r\n      try {\r\n        await this.getUser(userId);\r\n        this.props.history.push('/');\r\n        this.loadPosts();\r\n      } catch (error) {\r\n        console.log(error);\r\n        this.props.history.push('/login');\r\n      }\r\n    } else {\r\n      this.props.history.push('/login');\r\n    }\r\n  }\r\n\r\n  async getUser(userId) {\r\n    const user = await getLoggedUser(userId);\r\n    this.setState({ currentUser: user });\r\n  }\r\n\r\n  async loadPosts() {\r\n    const posts = await getPosts();\r\n    this.setState({ posts, loadedPosts: true });\r\n  }\r\n\r\n  onLogout () {\r\n    this.setState({ currentUser: {} });\r\n  }\r\n\r\n  onSearch (value) {\r\n    this.setState({ searchValue: value });\r\n  }\r\n\r\n  onProfileClick () {\r\n    this.props.history.push('/profile');\r\n  }\r\n\r\n  onLogoClick () {\r\n    this.props.history.push('/');\r\n  }\r\n\r\n  async onLoginComplete() {\r\n    const userId = getUserId();\r\n    if (userId) {\r\n      try {\r\n        await this.getUser(userId);\r\n        this.props.history.push('/');\r\n        this.loadPosts();\r\n      } catch (error) {\r\n        console.log(error);\r\n        this.props.history.push('/login');\r\n      }\r\n    } else {\r\n      this.props.history.push('/login');\r\n    }\r\n  }\r\n\r\n  renderNavbar () {\r\n    return <Navbar onLogoClick={this.onLogoClick} onProfileClick={this.onProfileClick} />;\r\n  }\r\n\r\n  renderSearchBar () {\r\n    const { searchValue } = this.state;\r\n    return (\r\n      <section className=\"row my-3\">\r\n        <article className=\"col-12\">\r\n          <SearchBar onSearch={this.onSearch} value={searchValue}/>\r\n        </article>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  renderPostList () {\r\n    const {\r\n      posts = [],\r\n      searchValue,\r\n      loadedPosts = false,\r\n    } = this.state;\r\n\r\n    if (!loadedPosts) {\r\n      return (\r\n        <p>Loading...</p>\r\n      );\r\n    }\r\n\r\n    let filteredPosts = [...posts];\r\n    if (searchValue) {\r\n      filteredPosts = filteredPosts.filter((p) => p.text.toLowerCase().includes(searchValue.toLowerCase()));\r\n    }\r\n\r\n    return <PostList posts={filteredPosts} />;\r\n  }\r\n\r\n  renderProfile () {\r\n    const {\r\n      currentUser: { avatar, username, bio } = {},\r\n    } = this.state;\r\n    return (\r\n      <section className=\"row my-3\">\r\n        <Profile\r\n          avatar={avatar}\r\n          username={username}\r\n          bio={bio}\r\n          onLogout={this.onLogout}\r\n        />\r\n      </section>\r\n    );\r\n  }\r\n\r\n  renderMainContent () {\r\n    return (\r\n      <div>\r\n        <Switch>\r\n          <Route path=\"/login\">\r\n            <Login onLoginComplete={this.onLoginComplete} />\r\n          </Route>\r\n          <Route path=\"/profile\">\r\n            {this.renderProfile()}\r\n          </Route>\r\n          <Route path=\"/\">\r\n            <div>\r\n              {this.renderSearchBar()}\r\n              {this.renderPostList()}\r\n            </div>\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <main>\r\n        <header>\r\n          {this.renderNavbar()}\r\n        </header>\r\n        <main className=\"App container\">\r\n          {this.renderMainContent()}\r\n        </main>\r\n      </main>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default withRouter(App);\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}